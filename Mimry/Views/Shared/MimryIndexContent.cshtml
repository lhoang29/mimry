@using Mimry.ViewModels
@model MimSeqPageView

@if (Model != null && Model.MimSeqViews != null)
{
    var nextPageUrl = Url.Action("Index", new { page = Model.PageIndex });
    foreach (var it in Model.MimSeqViews)
    {
        var mimryHeader = new Mimry.ViewModels.MimryHeader()
        {
            MimSeqID = it.MimSeqID,
            Title = it.Title,
            ReturnUrl = Url.Action("Details", "MimSeqs", new { id = it.MimSeqID }),
            IsLiked = it.IsLiked,
            IsOwner = it.IsOwner,
            LikeCount = it.LikeCount,
            CommentCount = it.CommentCount
        };
        @Html.Partial("MimryHeader", mimryHeader)

        var viewMode = MimViewMode.Thumbnail;
        foreach (var mimView in it.MimViews)
        {
            viewMode = mimView.ViewMode;
            @Html.Partial("Mim", mimView)
        }
        @Html.Partial("Mim", new MimView() { 
            MimSeqID = it.MimSeqID,
            MimID = Guid.Empty,
            ViewMode = MimViewMode.Thumbnail,
        })
        <hr />
    }

    <a class="infinite-more-link" href="@nextPageUrl"></a>
}
